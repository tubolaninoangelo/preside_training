!function(a){var b,c,d,e,f,g,h,i=a(".preside-tree-nav"),j=i.find(".tree-node"),k=a("#asset-listing-table"),l=a(".asset-manager-listing-form").first(),m=k.find("thead > tr > th"),n=a(".title-and-actions-container").first(),o=a(".page-subtitle").first(),p=a("#multi-action-buttons"),q=[],r=i18n.translateResource("preside-objects.asset:title"),s=cfrequest.folder||"";for(d=function(c,d){var f=c.data("folderId")||"",g=a(d.target);j.removeClass("selected"),c.addClass("selected"),g.hasClass("folder-name")&&c.parent().hasClass("tree-folder")&&e.toggleNode(c.parent()),s!==f&&a.ajax({url:buildAjaxLink("assetmanager.getFolderTitleAndActions"),data:{folder:f},method:"POST",success:function(d){s=f,n.html(d.title),o.html(c.find(".folder-name:first").html()),p.html(a(d.multiActions).html()),b&&b.fnPageChange("first")},beforeSend:function(){l.presideLoadingSheen(!0)},complete:function(){setTimeout(function(){l.presideLoadingSheen(!1)},400)}})},f=function(){var b=k.find("th input:checkbox"),c=a("#multi-action-buttons");b.on("click",function(){k.find("tr > td:first-child input:checkbox").each(function(){this.checked=b.is(":checked"),this.checked?a(this).closest("tr").addClass("selected"):a(this).closest("tr").removeClass("selected")})}),k.on("click","tbody :checkbox",function(){var b=a(this);b.closest("tr").toggleClass("selected",b.is(":checked"))}),c.data("hidden",!0),k.on("click","th input:checkbox,tbody tr > td:first-child input:checkbox",function(a){var d=k.find("tr > td:first-child input:checkbox:checked").length;d==k.find("td input:checkbox").length?b.prop("checked",!0):b.prop("checked",!1),g(!d),d&&c.data("hidden")?c.slideDown(250).data("hidden",!1).find("button").prop("disabled",!1):d||c.data("hidden")||c.slideUp(250).data("hidden",!0).find("button").prop("disabled",!0)})},h=function(){a("body").on("click","#multi-action-buttons button",function(b){a(this).closest("form").find("[name=multiAction]").val(a(this).attr("name"))})},g=function(b){k.find("tbody > tr").each(function(){b?a(this).attr("data-context-container","1"):a(this).removeAttr("data-context-container")})},i.presideTreeNav({onClick:d,collapseIcon:"fa-folder-open",expandIcon:"fa-folder"}),e=i.data("presideTreeNav"),q.push({sClass:"center",bSortable:!1,mData:"_checkbox",sWidth:"5em"}),c=1;c<m.length-1;c++)q.push({mData:a(m.get(c)).data("field"),sWidth:a(m.get(c)).data("width")||"auto",bSortable:!0});q.push({sClass:"center",bSortable:!1,sWidth:"8em",mData:"_options"}),b=k.dataTable({aoColumns:q,bServerSide:!0,sAjaxSource:buildAjaxLink("assetmanager.assetsForListingGrid"),fnServerParams:function(a){a.push({name:"folder",value:s})},processing:!0,bStateSave:!0,bPaginate:!0,bLengthChange:!0,aaSorting:[],sDom:"t<'dataTables_pagination bottom'<'pull-left'i><'pull-left'l><'pull-right'p><'clearfix'>",fnRowCallback:function(b){$row=a(b),$row.attr("data-context-container","1"),$row.addClass("clickable")},oLanguage:{oAria:{sSortAscending:i18n.translateResource("cms:datatables.sortAscending",{}),sSortDescending:i18n.translateResource("cms:datatables.sortDescending",{})},oPaginate:{sFirst:i18n.translateResource("cms:datatables.first",{data:[r],defaultValue:""}),sLast:i18n.translateResource("cms:datatables.last",{data:[r],defaultValue:""}),sNext:i18n.translateResource("cms:datatables.next",{data:[r],defaultValue:""}),sPrevious:i18n.translateResource("cms:datatables.previous",{data:[r],defaultValue:""})},sEmptyTable:i18n.translateResource("cms:datatables.emptyTable",{data:[r],defaultValue:""}),sInfo:i18n.translateResource("cms:datatables.info",{data:[r],defaultValue:""}),sInfoEmpty:i18n.translateResource("cms:datatables.infoEmpty",{data:[r],defaultValue:""}),sInfoFiltered:i18n.translateResource("cms:datatables.infoFiltered",{data:[r],defaultValue:""}),sInfoThousands:i18n.translateResource("cms:datatables.infoThousands",{data:[r],defaultValue:""}),sLengthMenu:i18n.translateResource("cms:datatables.lengthMenu",{data:[r],defaultValue:""}),sLoadingRecords:i18n.translateResource("cms:datatables.loadingRecords",{data:[r],defaultValue:""}),sProcessing:l.presideLoadingSheen(!0),sZeroRecords:i18n.translateResource("cms:datatables.zeroRecords",{data:[r],defaultValue:""}),sSearch:"",sUrl:"",sInfoPostFix:""}}).on("draw.dt",function(){setTimeout(function(){l.presideLoadingSheen(!1)},400)}),f(),h()}(presideJQuery),function(a){var b,c,d,e,f,g,h=a("#asset-search-box");b=function(){c(function(a){var b={hint:!0,highlight:!0,minLength:1},c={source:a,displayKey:"text",templates:{suggestion:e}};h.typeahead(b,c),h.on("typeahead:selected",function(a,b){g(b)})})},c=function(a){var b=new Bloodhound({local:[],prefetch:h.data("prefetchUrl"),remote:h.data("remoteUrl"),datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.text)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:100,dupDetector:function(a,b){return a.value==b.value}});b.initialize().done(function(){a(b.ttAdapter())})},e=function(a){return Mustache.render(d,a)},g=function(b){a("body").presideLoadingSheen(!0),window.location=buildAdminLink("assetmanager","editasset",{asset:b.value})},f=function(){d='<div class="result-container"><div class="icon-container">{{{icon}}}</div> <div class="folder-and-text"><span class="folder">{{folder}}</span> <span class="title">{{text}}</span></div></div><div class="clearfix"></div>'},h.length&&(f(),b())}(presideJQuery),function(a){var b,c;b=function(a,b,c,d){this.$dialogContainer=a,this.assets=b,this.fromFolder=c,this.setupModalConfig(d)},b.prototype.open=function(){var b=presideBootbox.dialog(this.modalConfig),c=this;b.on("shown.bs.modal",function(){a(b).find(".dialog-container").append(c.$dialogContainer),c.$dialogContainer.removeClass("hide"),c.$dialogContainer.find('input[name="assets"]').val(c.assets),c.$dialogContainer.find('input[name="fromFolder"]').val(c.fromFolder)}),b.modal("show")},b.prototype.setupModalConfig=function(a){var b=this;this.modalConfig={title:a,message:'<div class="dialog-container"></div>',className:"",show:!1,buttons:{}},this.modalConfig.buttons.cancel={label:'<i class="fa fa-reply"></i> '+i18n.translateResource("cms:cancel.btn"),className:"btn-default",callback:function(){b.onCancel()}},this.modalConfig.buttons.ok={label:'<i class="fa fa-check"></i> '+i18n.translateResource("cms:ok.btn"),className:"btn-primary",callback:function(){b.onOk()}}},b.prototype.onCancel=function(){this.gracefullyShutdown()},b.prototype.onOk=function(){a("body").presideLoadingSheen(!0),this.$dialogContainer.find("form").first().submit()},b.prototype.gracefullyShutdown=function(){this.$dialogContainer.addClass("hide"),a("body").append(this.$dialogContainer)},a("body").on("click",'a[data-toggle="move-assets-dialog"]',function(c){c.preventDefault();var d=a(this),e=a(this.hash),f=d.data("assetId"),g=d.data("folderId"),h=d.data("dialogTitle");new b(e,f,g,h).open()}),a("body").on("click",'button[data-toggle="move-assets-dialog"]',function(d){d.preventDefault();var e=a(this),f=a("#"+e.data("target")),g=c(e.closest("form")),h=e.data("dialogTitle");new b(f,g,"",h).open()}),c=function(b){var c=[];return b.find("[name='id']:checked").each(function(){c.push(a(this).val())}),c.join(",")}}(presideJQuery);
//# sourceMappingURL=_index.min.map