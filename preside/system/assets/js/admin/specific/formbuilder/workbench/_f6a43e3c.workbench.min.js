!function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n=a(".formbuilder-item-type-picker"),o=a(".formbuilder-item-type-picker .item-type"),p=a(".form-items"),q=a(".instructions"),r=cfrequest.formbuilderFormId,s=cfrequest.formbuilderSaveNewItemEndpoint,t=cfrequest.formbuilderSaveItemEndpoint,u=cfrequest.formbuilderDeleteItemEndpoint,v=cfrequest.formbuilderSetSortOrderEndpoint;b=function(){o.draggable({helper:"clone",connectToSortable:p}),q.droppable({accept:o,drop:d}),p.sortable({stop:e,placeholder:"item-type sortable-placeholder",handle:".sort-link"})},setupAccordionForItemTypes=function(){n.accordion({collapsible:!0,heightStyle:"content",animate:250,header:".accordion-header"})},c=function(){p.on("click",".edit-link",j),p.on("click",".clone-link",k),p.on("click",".delete-link",l)},d=function(a,b){var c=b.draggable.clone();c.appendTo(p),q.removeClass("empty"),f(c)},e=function(a,b){var c=b.item;c.data().itemTemplate?(f(c),c.data("itemTemplate",!1)):m()},f=function(a){var b=a.data();b.requiresConfiguration?i(a):g(b.itemType,{},a)},g=function(b,c,d){var e,f=a.extend({},{formId:r,itemType:b},c);e=function(b){var c=a(b.itemView);d.after(c),void 0===d.enableCloneItem&&d.remove(),m()},a.ajax(s,{method:"POST",data:f,cache:!1,success:e})},h=function(b,c){var d,e=a.extend({},{id:c.data("id")},b);d=function(b){var d=a(b.itemView);c.after(d),c.remove()},a.ajax(t,{method:"POST",data:e,cache:!1,success:d})},i=function(b){var c,d,e,f,i,j=b.data(),k=void 0===b.enableCloneItem?j.configEndpoint:j.configClone,l=void 0===b.enableCloneItem?j.id:"";e=function(){return i.validateFormBuilderItemConfig(r,l||"",function(a){if(a){var c=i.getFormBuilderItemConfig();void 0===l||void 0!==b.enableCloneItem?g(j.itemType,c,b):h(c,b),f.close()}}),!1},c=function(){b.data();void 0===l&&b.remove()},d=function(a){i=a},f=new PresideIframeModal(k,"100%","100%",{onLoad:d,onok:e,oncancel:c},{title:j.configTitle,className:"full-screen-dialog",buttonList:["ok","cancel"]}),f.open(),a('button[class="bootbox-close-button close"]').on("click",function(a){b.data();void 0===l&&b.remove()})},j=function(b){var c=a(this),d=c.closest(".form-item");b.preventDefault(),i(d)},k=function(b){var c=a(this),d=c.closest(".form-item");d.enableCloneItem=!0,b.preventDefault(),i(d)},l=function(b){var c=a(this),d=c.closest(".form-item"),e=c.data("title")||c.attr("title"),f=i18n.translateResource("cms:confirmation.prompt",{data:[e.charAt(0).toLowerCase()+e.slice(1)]});b.preventDefault(),presideBootbox.confirm(f,function(b){b&&a.ajax(u,{method:"POST",data:{id:d.data("id")},cache:!1,success:function(a){a&&d.remove()}})})},m=function(){var b=p.sortable("toArray",{attribute:"data-id"}).join();b.length&&a.ajax(v,{method:"POST",data:{itemIds:b},cache:!1})},b(),setupAccordionForItemTypes(),c()}(presideJQuery);
//# sourceMappingURL=_workbench.min.map